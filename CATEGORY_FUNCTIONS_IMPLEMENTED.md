# ‚úÖ –§–£–ù–ö–¶–ò–ò –ö–ê–¢–ï–ì–û–†–ò–ô –†–ï–ê–õ–ò–ó–û–í–ê–ù–´!

## üìã –ß–¢–û –°–î–ï–õ–ê–ù–û:

### 1. **–î–æ–±–∞–≤–ª–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** ‚úÖ

#### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
```tsx
const handleAddCategory = () => {
  setEditingCategory(null)
  setShowAddModal(true)
}
```
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É `AddCategoryModal` –≤ —Ä–µ–∂–∏–º–µ —Å–æ–∑–¥–∞–Ω–∏—è
- –ö–Ω–æ–ø–∫–∞ "Aggiungi categoria" –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
- –ö–Ω–æ–ø–∫–∞ "Aggiungi prima categoria" –≤ –ø—É—Å—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏

#### ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
```tsx
const handleEditClick = (e: React.MouseEvent, category: CategoryWithCounts) => {
  e.stopPropagation()
  setEditingCategory(category)
  setShowAddModal(true)
}
```
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ö–Ω–æ–ø–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π `Edit` (–∫–∞—Ä–∞–Ω–¥–∞—à)
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª–∫—É —Å –¥–∞–Ω–Ω—ã–º–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

#### ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
```tsx
const handleDeleteClick = async (e: React.MouseEvent, categoryId: string) => {
  e.stopPropagation()
  
  if (window.confirm(t('confirmDeleteCategory'))) {
    try {
      const response = await fetch(`/api/product-categories/${categoryId}`, {
        method: 'DELETE',
      })
      
      if (response.ok) {
        await loadCategories()
        // –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞ –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
        if (selectedCategory?.id === categoryId) {
          setSelectedCategory(null)
        }
      }
    } catch (error) {
      console.error('Error deleting category:', error)
    }
  }
}
```
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ö–Ω–æ–ø–∫–∞ —Å –∏–∫–æ–Ω–∫–æ–π `Trash2` (–∫–æ—Ä–∑–∏–Ω–∞)
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è
- –°–±—Ä–æ—Å –≤—ã–±–æ—Ä–∞ –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è

### 2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AddCategoryModal** ‚úÖ

```tsx
<AddCategoryModal
  isOpen={showAddModal}
  onClose={handleModalClose}
  onSave={handleCategorySaved}
  initialData={
    editingCategory
      ? {
          id: editingCategory.id,
          name: editingCategory.name,
          icon: editingCategory.icon,
          description: editingCategory.description || '',
        }
      : undefined
  }
/>
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –º–æ–¥–∞–ª–∫–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
- –†–µ–∂–∏–º —Å–æ–∑–¥–∞–Ω–∏—è: `initialData === undefined`
- –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞

### 3. **–ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö** ‚úÖ

```tsx
{/* –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É */}
<div className='absolute top-1.5 right-1.5 flex items-center space-x-0.5 opacity-0 group-hover:opacity-100 transition-opacity'>
  <Button
    variant='ghost'
    size='sm'
    onClick={e => handleEditClick(e, category)}
    className='h-5 w-5 p-0 hover:bg-blue-100'
  >
    <Edit className='h-2.5 w-2.5 text-gray-600' />
  </Button>
  <Button
    variant='ghost'
    size='sm'
    onClick={e => handleDeleteClick(e, category.id)}
    className='h-5 w-5 p-0 hover:bg-red-100'
  >
    <Trash2 className='h-2.5 w-2.5 text-red-600' />
  </Button>
</div>
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- ‚úÖ –ü–æ—è–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ (`opacity-0 group-hover:opacity-100`)
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã (`h-5 w-5`)
- ‚úÖ –ú–∞–ª–µ–Ω—å–∫–∏–µ –∏–∫–æ–Ω–∫–∏ (`h-2.5 w-2.5`)
- ‚úÖ Hover —ç—Ñ—Ñ–µ–∫—Ç—ã (`hover:bg-blue-100`, `hover:bg-red-100`)
- ‚úÖ `e.stopPropagation()` - –Ω–µ –≤—ã–±–∏—Ä–∞—é—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø—Ä–∏ –∫–ª–∏–∫–µ

### 4. **–°–≤—è–∑—å —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö** ‚úÖ

#### –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
```tsx
const loadCategories = async () => {
  setCategoriesLoading(true)
  try {
    const response = await fetch('/api/categories/with-counts')
    if (response.ok) {
      const data = await response.json()
      setCategories(data)
    }
  } catch (error) {
    console.error('Error loading categories:', error)
  } finally {
    setCategoriesLoading(false)
  }
}
```

**API Endpoint:** `/api/categories/with-counts`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å —Å—á–µ—Ç—á–∏–∫–∞–º–∏
- `parametersCount` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `suppliersCount` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤

#### –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
**API Endpoint:** `/api/product-categories/${categoryId}` (DELETE)

#### –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ `AddCategoryModal`:
- POST `/api/product-categories` - —Å–æ–∑–¥–∞–Ω–∏–µ
- PUT `/api/product-categories/${id}` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### 5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–π** ‚úÖ

```tsx
const handleCategorySaved = async () => {
  await loadCategories()
  setShowAddModal(false)
  setEditingCategory(null)
}
```

–ü–æ—Å–ª–µ **–ö–ê–ñ–î–û–ô** –æ–ø–µ—Ä–∞—Ü–∏–∏:
- ‚úÖ –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
- ‚úÖ –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üéØ –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–û–°–¢–¨:

### ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ:
1. –ö–ª–∏–∫–Ω—É—Ç—å "Aggiungi categoria"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É –≤ –º–æ–¥–∞–ª–∫–µ
3. –ù–∞–∂–∞—Ç—å "Salva"
4. –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è

### ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. –ù–∞–≤–µ—Å—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
2. –ö–ª–∏–∫–Ω—É—Ç—å –∫–Ω–æ–ø–∫—É "Edit" (–∫–∞—Ä–∞–Ω–¥–∞—à)
3. –ò–∑–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–∞–ª–∫–µ
4. –ù–∞–∂–∞—Ç—å "Salva"
5. –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è

### ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ:
1. –ù–∞–≤–µ—Å—Ç–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
2. –ö–ª–∏–∫–Ω—É—Ç—å –∫–Ω–æ–ø–∫—É "Delete" (–∫–æ—Ä–∑–∏–Ω–∞)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ
4. –ö–∞—Ç–µ–≥–æ—Ä–∏—è —É–¥–∞–ª–∏—Ç—Å—è –∏–∑ —Å–ø–∏—Å–∫–∞
5. –ï—Å–ª–∏ –±—ã–ª–∞ –≤—ã–±—Ä–∞–Ω–∞ - –≤—ã–±–æ—Ä —Å–±—Ä–æ—Å–∏—Ç—Å—è

---

## üîó –°–í–Ø–ó–¨ –° –ë–ê–ó–û–ô –î–ê–ù–ù–´–•:

### ‚úÖ –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:
- –î–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `ProductCategory`
- API: `/api/categories/with-counts`
- –í–∫–ª—é—á–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫–∏ —Å–≤—è–∑–µ–π

### ‚úÖ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏:
| –û–ø–µ—Ä–∞—Ü–∏—è | Endpoint | –ú–µ—Ç–æ–¥ |
|----------|----------|-------|
| –ó–∞–≥—Ä—É–∑–∫–∞ | `/api/categories/with-counts` | GET |
| –°–æ–∑–¥–∞–Ω–∏–µ | `/api/product-categories` | POST |
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ | `/api/product-categories/${id}` | PUT |
| –£–¥–∞–ª–µ–Ω–∏–µ | `/api/product-categories/${id}` | DELETE |

### ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `loadCategories()`
- –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å –±–∞–∑–æ–π
- –°—á–µ—Ç—á–∏–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üìä –°–û–°–¢–û–Ø–ù–ò–ï:

```tsx
// –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
const [categories, setCategories] = useState<CategoryWithCounts[]>([])
const [categoriesLoading, setCategoriesLoading] = useState(true)

// –ú–æ–¥–∞–ª–∫–∞
const [showAddModal, setShowAddModal] = useState(false)
const [editingCategory, setEditingCategory] = useState<CategoryWithCounts | null>(null)

// –í—ã–±–æ—Ä
const [selectedCategory, setSelectedCategory] = useState<CategoryWithCounts | null>(null)
```

---

## ‚úÖ –†–ï–ó–£–õ–¨–¢–ê–¢:

### üéØ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
1. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ** - —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –∏ –º–æ–¥–∞–ª–∫—É
2. ‚úÖ **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
3. ‚úÖ **–£–¥–∞–ª–µ–Ω–∏–µ** - —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
4. ‚úÖ **–í—ã–±–æ—Ä** - –∫–ª–∏–∫ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–µ
5. ‚úÖ **–ó–∞–≥—Ä—É–∑–∫–∞** - –∏–∑ –±–∞–∑—ã —á–µ—Ä–µ–∑ API
6. ‚úÖ **–ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** - –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏

### üîó –°–≤—è–∑—å —Å —Å–∏—Å—Ç–µ–º–æ–π:
1. ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** - —á–µ—Ä–µ–∑ Prisma API
2. ‚úÖ **–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫** - —Ç–∞–±–ª–∏—Ü–∞ `ProductCategory`
3. ‚úÖ **–ú–æ–¥–∞–ª–∫–∞** - `AddCategoryModal`
4. ‚úÖ **API** - `/api/categories/with-counts`, `/api/product-categories`

### üé® UI/UX:
1. ‚úÖ **–ö–Ω–æ–ø–∫–∏ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏** - –ø–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ
2. ‚úÖ **–ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –¥–∏–∑–∞–π–Ω** - –º–∞–ª–µ–Ω—å–∫–∏–µ –∏–∫–æ–Ω–∫–∏
3. ‚úÖ **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
4. ‚úÖ **–°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏** - "Caricamento..."
5. ‚úÖ **–ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ** - –ø—Ä–∏–∑—ã–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é

---

## üöÄ –ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ!

**–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ —ç—Ç–∞–ø–µ 1 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!** ‚úÖ

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ üéØ
