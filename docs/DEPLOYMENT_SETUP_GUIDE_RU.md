# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Deployment –¥–ª—è PUNTO INFISSI CRM

## üìñ –ß–¢–û –ú–´ –ù–ê–°–¢–†–ê–ò–í–ê–ï–ú? (–ü—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º)

–ú—ã —Å–æ–∑–¥–∞–¥–∏–º **2 –≤–µ—Ä—Å–∏–∏ —Å–∞–π—Ç–∞**:

1. **STAGING (–¢–µ—Å—Ç–æ–≤—ã–π)** - `staging.infissi.omoxsoft.com.ua`
   - –ó–¥–µ—Å—å —Ç—ã –±—É–¥–µ—à—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è - –Ω–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ!
   
2. **PRODUCTION (–†–∞–±–æ—á–∏–π)** - `infissi.omoxsoft.com.ua`
   - –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—É–¥—É—Ç **–±–µ–∑ –ø–∞–¥–µ–Ω–∏–π** (Blue-Green Deployment)

---

## üéØ –ß–¢–û –¢–ê–ö–û–ï BLUE-GREEN DEPLOYMENT?

**–ü—Ä–µ–¥—Å—Ç–∞–≤—å –¥–≤–∞ —Å–≤–µ—Ç–æ—Ñ–æ—Ä–∞:**
- üü¢ **–ó–µ–ª—ë–Ω—ã–π** - —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è —Å–∞–π—Ç–∞ (–ø–æ—Ä—Ç 3000)
- üîµ **–°–∏–Ω–∏–π** - –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å–∞–π—Ç–∞ (–ø–æ—Ä—Ç 3001)

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ üü¢ **–∑–µ–ª—ë–Ω–æ–º** (–ø–æ—Ä—Ç 3000)
2. –ü—Ä–∏—Ö–æ–¥–∏—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
3. –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ üîµ **—Å–∏–Ω–µ–º** (–ø–æ—Ä—Ç 3001)
4. –ü—Ä–æ–≤–µ—Ä—è–µ–º: —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è?
5. –ï—Å–ª–∏ –î–ê ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ç—Ä–∞—Ñ–∏–∫ —Å üü¢ –Ω–∞ üîµ
6. –ï—Å–ª–∏ –ù–ï–¢ ‚Üí –æ—Å—Ç–∞–≤–ª—è–µ–º –≤—Å—ë –∫–∞–∫ –±—ã–ª–æ
7. **–°–∞–π—Ç –Ω–µ –ø–∞–¥–∞–µ—Ç –Ω–∏ –Ω–∞ —Å–µ–∫—É–Ω–¥—É!**

---

## üìã –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –ù–ê –°–ï–†–í–ï–†–ï?

### **–≠–¢–ê–ü 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Staging**

#### **1.1. –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è staging**
```bash
ssh fastuser@95.67.11.37

cd /var/www/fastuser/data/www
mkdir -p staging.infissi.omoxsoft.com.ua
cd staging.infissi.omoxsoft.com.ua

# –ö–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–æ–µ–∫—Ç
git clone https://github.com/mekeidzerus-dev/punto-infissi-crm.git .
git checkout develop
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?**
–ú—ã —Å–æ–∑–¥–∞–ª–∏ **–æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É** –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ —Å–∞–π—Ç–∞.

---

#### **1.2. –°–æ–∑–¥–∞–µ–º .env —Ñ–∞–π–ª –¥–ª—è staging**
```bash
nano .env
```

**–í—Å—Ç–∞–≤—å —ç—Ç–æ:**
```env
DATABASE_URL="postgresql://infissi_omox:ny+dKU%FuC<o)og[@localhost:5432/infissi_staging"
NEXTAUTH_SECRET="YOUR_NEXTAUTH_SECRET"
NEXTAUTH_URL="https://staging.infissi.omoxsoft.com.ua"
NODE_ENV="staging"
```

**–°–æ—Ö—Ä–∞–Ω–∏:** `Ctrl + X` ‚Üí `Y` ‚Üí `Enter`

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?**
–ú—ã —Å–æ–∑–¥–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è staging, —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–æ–≥–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥–∞–∫—à–Ω–∞!

---

#### **1.3. –°–æ–∑–¥–∞–µ–º –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –¥–ª—è staging**
```bash
# –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ PostgreSQL
psql -U infissi_omox -h localhost

# –°–æ–∑–¥–∞–µ–º –±–∞–∑—É
CREATE DATABASE infissi_staging;

# –í—ã—Ö–æ–¥–∏–º
\q
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?**
–¢–µ–ø–µ—Ä—å —É —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–∞–π—Ç–∞ —Å–≤–æ—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –ú–æ–∂–µ—à—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å!

---

#### **1.4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å–∫–∞–µ–º**
```bash
cd /var/www/fastuser/data/www/staging.infissi.omoxsoft.com.ua

npm ci --production
npm install @tailwindcss/postcss tailwindcss postcss autoprefixer --save-dev

# –°–æ–∑–¥–∞–µ–º next.config.js (—á—Ç–æ–±—ã –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å TypeScript –æ—à–∏–±–∫–∏)
cat > next.config.js << 'EOF'
/** @type {import('next').NextConfig} */
const nextConfig = {
  typescript: {
    ignoreBuildErrors: true,
  },
  eslint: {
    ignoreDuringBuilds: true,
  },
  env: {
    NODE_ENV: 'staging',
  },
};
module.exports = nextConfig;
EOF

# –ë–∏–ª–¥–∏–º –ø—Ä–æ–µ–∫—Ç
npm run build

# –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞ –ø–æ—Ä—Ç—É 3002
pm2 start npm --name "punto-infissi-crm-staging" -- start -- --port 3002
pm2 save
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?**
Staging —Å–∞–π—Ç –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3002!

---

#### **1.5. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Nginx –¥–ª—è staging**

–í FastPanel:
1. –ó–∞—Ö–æ–¥–∏ –≤ **–°–∞–π—Ç—ã**
2. –ù–∞–∂–º–∏ **–î–æ–±–∞–≤–∏—Ç—å —Å–∞–π—Ç**
3. –£–∫–∞–∂–∏ –¥–æ–º–µ–Ω: `staging.infissi.omoxsoft.com.ua`
4. –í—ã–±–µ—Ä–∏ **Proxy (Node.js)**
5. –£–∫–∞–∂–∏ –ø–æ—Ä—Ç: `3002`
6. –í–∫–ª—é—á–∏ **SSL** (Let's Encrypt)

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?**
–¢–µ–ø–µ—Ä—å staging –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `https://staging.infissi.omoxsoft.com.ua`

---

### **–≠–¢–ê–ü 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Blue-Green –¥–ª—è Production**

#### **2.1. –°–æ–∑–¥–∞–µ–º –¥–≤–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –≤–µ—Ä—Å–∏–π**
```bash
cd /var/www/fastuser/data/www/infissi.omoxsoft.com.ua

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
pm2 stop punto-infissi-crm
pm2 delete punto-infissi-crm

# –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é current –∏ –∫–æ–ø–∏—Ä—É–µ–º —Ç—É–¥–∞ –≤—Å–µ —Ñ–∞–π–ª—ã
mkdir -p current
cp -r .next current/ 2>/dev/null || true
cp -r node_modules current/ 2>/dev/null || true
cp -r public current/ 2>/dev/null || true
cp -r src current/ 2>/dev/null || true
cp -r prisma current/ 2>/dev/null || true
cp package*.json current/ 2>/dev/null || true
cp next.config.js current/ 2>/dev/null || true
cp .env current/ 2>/dev/null || true

# –ó–∞–ø—É—Å–∫–∞–µ–º –∏–∑ current
cd current
pm2 start npm --name "punto-infissi-crm-current" -- start -- --port 3000
pm2 save
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?**
–ú—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è Blue-Green deployment:
- `current/` - —Ç–µ–∫—É—â–∞—è —Ä–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è (–ø–æ—Ä—Ç 3000)
- `staging/` - –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–µ, –ø–æ—Ä—Ç 3001)

---

#### **2.2. –û–±–Ω–æ–≤–ª—è–µ–º Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**

–í FastPanel:
1. **–°–∞–π—Ç—ã** ‚Üí `infissi.omoxsoft.com.ua`
2. **Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
3. –ó–∞–º–µ–Ω–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞:

```nginx
server {
    listen 80;
    listen [::]:80;
    server_name infissi.omoxsoft.com.ua;
    return 301 https://$host$request_uri;
}

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name infissi.omoxsoft.com.ua;

    ssl_certificate /etc/letsencrypt/live/infissi.omoxsoft.com.ua/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/infissi.omoxsoft.com.ua/privkey.pem;

    # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Å–Ω–∞—á–∞–ª–∞ –ø–æ—Ä—Ç 3000)
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

4. **–°–æ—Ö—Ä–∞–Ω–∏** –∏ **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Nginx**

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ?**
Nginx –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Blue-Green deployment. –ö–æ–≥–¥–∞ –ø—Ä–∏–¥—ë—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç –ø–æ—Ä—Ç—ã.

---

### **–≠–¢–ê–ü 3: GitHub Secrets (–£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)**

–£ —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å —ç—Ç–∏ —Å–µ–∫—Ä–µ—Ç—ã –≤ GitHub:
- `FASTPANEL_HOST`: `95.67.11.37`
- `FASTPANEL_USER`: `fastuser`
- `FASTPANEL_PORT`: `222`
- `FASTPANEL_SSH_KEY`: –≤–∞—à SSH –∫–ª—é—á
- `DATABASE_URL`: —Å—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

**–ù–∏—á–µ–≥–æ –º–µ–Ω—è—Ç—å –Ω–µ –Ω—É–∂–Ω–æ!** ‚úÖ

---

## üéÆ –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢ –ü–û–°–õ–ï –ù–ê–°–¢–†–û–ô–ö–ò?

### **–°–¶–ï–ù–ê–†–ò–ô 1: –¢–µ—Å—Ç–∏—Ä—É–µ—à—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é**

```bash
# 1. –°–æ–∑–¥–∞–µ—à—å feature –≤–µ—Ç–∫—É
git checkout -b feature/new-awesome-feature

# 2. –í–Ω–æ—Å–∏—à—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
# ... –∫–æ–¥ ...

# 3. –ö–æ–º–º–∏—Ç–∏—à—å
git add .
git commit -m "feat: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫—Ä—É—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è"

# 4. –ú–µ—Ä–∂–∏—à—å –≤ develop
git checkout develop
git merge feature/new-awesome-feature
git push origin develop
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
1. GitHub Actions –≤–∏–¥–∏—Ç push –≤ `develop`
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç workflow `staging-deploy.yml`
3. –î–µ–ø–ª–æ–∏—Ç –∫–æ–¥ –Ω–∞ `staging.infissi.omoxsoft.com.ua`
4. –¢—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å staging –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—à—å

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–µ—à—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å, –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∞–π—Ç –Ω–µ —Ç—Ä–æ–Ω—É—Ç! ‚úÖ

---

### **–°–¶–ï–ù–ê–†–ò–ô 2: –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤—ã–∫–∞—Ç—ã–≤–∞–µ—à—å –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω**

```bash
# 1. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—à—å—Å—è –Ω–∞ main
git checkout main

# 2. –î–æ–±–∞–≤–ª—è–µ—à—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ develop
git merge develop

# 3. –ü—É—à–∏—à—å
git push origin main
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
1. GitHub Actions –≤–∏–¥–∏—Ç push –≤ `main`
2. –ó–∞–ø—É—Å–∫–∞–µ—Ç workflow `blue-green-deploy.yml`
3. –°–æ–∑–¥–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `staging/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ç—É–¥–∞ –Ω–æ–≤—ã–π –∫–æ–¥
5. –ë–∏–ª–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç
6. –ó–∞–ø—É—Å–∫–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 3001
7. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: `curl http://localhost:3001`
8. –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é (3000)
   - Nginx –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ 3001
   - –£–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
9. –ï—Å–ª–∏ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:
   - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
   - –û—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞—Ä—É—é —Ä–∞–±–æ—Ç–∞—Ç—å
   - **–°–∞–π—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å!**

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ –ø–∞–¥–µ–Ω–∏–π! ‚úÖ

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì (–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç?)

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:**
```bash
ssh fastuser@95.67.11.37
pm2 status
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id  ‚îÇ name                       ‚îÇ status  ‚îÇ port ‚îÇ cpu ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0   ‚îÇ punto-infissi-crm-current  ‚îÇ online  ‚îÇ 3000 ‚îÇ 0%  ‚îÇ
‚îÇ 1   ‚îÇ punto-infissi-crm-staging  ‚îÇ online  ‚îÇ 3002 ‚îÇ 0%  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–æ–≤:**
```bash
# –ü—Ä–æ–¥–∞–∫—à–Ω
curl -I https://infissi.omoxsoft.com.ua

# Staging
curl -I https://staging.infissi.omoxsoft.com.ua
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:** `HTTP/2 200`

---

### **–õ–æ–≥–∏ PM2:**
```bash
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ –ø—Ä–æ–¥–∞–∫—à–Ω–∞
pm2 logs punto-infissi-crm-current

# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏ staging
pm2 logs punto-infissi-crm-staging
```

---

## üéØ –ò–¢–û–ì–û–í–ê–Ø –°–•–ï–ú–ê

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     GITHUB                         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ   develop      ‚îÇ         main                      ‚îÇ
‚îÇ   (push)       ‚îÇ         (push)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                  ‚îÇ
         ‚îÇ                  ‚îÇ
         ‚ñº                  ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ GitHub Actions ‚îÇ  ‚îÇ   GitHub Actions              ‚îÇ
‚îÇ staging-deploy ‚îÇ  ‚îÇ   blue-green-deploy           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                     ‚îÇ
         ‚îÇ                     ‚îÇ
         ‚ñº                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    STAGING     ‚îÇ  ‚îÇ       PRODUCTION              ‚îÇ
‚îÇ port 3002      ‚îÇ  ‚îÇ  current/ ‚Üí 3000              ‚îÇ
‚îÇ                ‚îÇ  ‚îÇ  staging/ ‚Üí 3001 (–≤—Ä–µ–º–µ–Ω–Ω–æ)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                     ‚îÇ
         ‚îÇ                     ‚îÇ
         ‚ñº                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   NGINX        ‚îÇ  ‚îÇ        NGINX                  ‚îÇ
‚îÇ staging.       ‚îÇ  ‚îÇ   infissi.omoxsoft.com.ua     ‚îÇ
‚îÇ infissi...     ‚îÇ  ‚îÇ   (–∞–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## ‚ùì –ß–ê–°–¢–´–ï –í–û–ü–†–û–°–´

### **Q: –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–Ω–∏–º–∞–µ—Ç –¥–µ–ø–ª–æ–π?**
- **Staging:** ~2-3 –º–∏–Ω—É—Ç—ã
- **Production (Blue-Green):** ~3-5 –º–∏–Ω—É—Ç

---

### **Q: –ß—Ç–æ –µ—Å–ª–∏ –¥–µ–ø–ª–æ–π —É–ø–∞–ª?**
- –ó–∞–π–¥–∏ –≤ GitHub ‚Üí **Actions** ‚Üí —Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏
- –ü—Ä–æ–≤–µ—Ä—å SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ: `ssh fastuser@95.67.11.37`
- –ü—Ä–æ–≤–µ—Ä—å PM2: `pm2 status`

---

### **Q: –ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π?**
```bash
# –ï—Å–ª–∏ —É–∂–µ –∑–∞–¥–µ–ø–ª–æ–∏–ª –≤ main, –Ω–æ —Ö–æ—á–µ—à—å –æ—Ç–∫–∞—Ç–∏—Ç—å:
git checkout main
git revert HEAD
git push origin main

# GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é
```

---

### **Q: –ú–æ–∂–Ω–æ –ª–∏ –¥–µ–ø–ª–æ–∏—Ç—å –≤—Ä—É—á–Ω—É—é?**
–î–∞! –ó–∞–π–¥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
```bash
ssh fastuser@95.67.11.37
cd /var/www/fastuser/data/www/infissi.omoxsoft.com.ua/current
git pull origin main
npm install
npm run build
pm2 restart punto-infissi-crm-current
```

---

## üéì –ò–¢–û–ì–û–í–´–ô –ß–ï–ö–õ–ò–°–¢

### **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
- [ ] –°–æ–∑–¥–∞–ª feature –≤–µ—Ç–∫—É
- [ ] –í–Ω–µ—Å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] –ó–∞–∫–æ–º–º–∏—Ç–∏–ª –∏ –∑–∞–ø—É—à–∏–ª –≤ `develop`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –Ω–∞ `staging.infissi.omoxsoft.com.ua`

### **–†–µ–ª–∏–∑:**
- [ ] –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ staging?
- [ ] –°–º–µ—Ä–∂–∏–ª `develop` –≤ `main`
- [ ] –ó–∞–ø—É—à–∏–ª –≤ `main`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª GitHub Actions (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å success)
- [ ] –û—Ç–∫—Ä—ã–ª `infissi.omoxsoft.com.ua` –∏ –ø—Ä–æ–≤–µ—Ä–∏–ª

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
- [ ] `pm2 status` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç online?
- [ ] –°–∞–π—Ç—ã –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è?
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ `pm2 logs`?

---

**–ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å —É —Ç–µ–±—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π CI/CD! üöÄ**

